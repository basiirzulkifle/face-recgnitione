{"ast":null,"code":"/**\n * FingerprintJS Pro React v2.1.1 - Copyright (c) FingerprintJS, Inc, 2022 (https://fingerprint.com)\n * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.\n */\n\nimport { createContext, cloneElement, Component, useRef, useMemo, useCallback, useEffect, useContext, useState } from 'react';\nimport { jsx } from 'react/jsx-runtime';\nimport { FpjsClient } from '@fingerprintjs/fingerprintjs-pro-spa';\nexport { CacheLocation, CacheStub, FpjsClient, InMemoryCache, LocalStorageCache, SessionStorageCache } from '@fingerprintjs/fingerprintjs-pro-spa';\nimport deepEquals from 'fast-deep-equal';\nvar stub = function () {\n  throw new Error('You forgot to wrap your component in <FpjsProvider>.');\n};\nvar initialContext = {\n  getVisitorData: stub,\n  clearCache: stub\n};\nvar FpjsContext = createContext(initialContext);\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nfunction __generator(thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\nvar name = \"@fingerprintjs/fingerprintjs-pro-react\";\nvar version = \"2.1.1\";\nvar isSSR = function () {\n  return typeof window === 'undefined' || typeof window.document === 'undefined';\n};\nfunction waitUntil(_a) {\n  var checkCondition = _a.checkCondition,\n    _b = _a.intervalMs,\n    intervalMs = _b === void 0 ? 250 : _b,\n    _c = _a.timeoutMs,\n    timeoutMs = _c === void 0 ? 2000 : _c;\n  return new Promise(function (resolve, reject) {\n    var timeoutId = setTimeout(function () {\n      clearInterval(interval);\n      reject(new Error('Timeout'));\n    }, timeoutMs);\n    var interval = setInterval(function () {\n      if (checkCondition()) {\n        clearTimeout(timeoutId);\n        clearInterval(interval);\n        resolve();\n      }\n    }, intervalMs);\n  });\n}\nvar env = '{\"name\":\"react\",\"version\":\"18.2.0\"}';\nvar Env;\n(function (Env) {\n  Env[\"React\"] = \"react\";\n  Env[\"Preact\"] = \"preact\";\n  Env[\"Next\"] = \"next\";\n  Env[\"Unknown\"] = \"unknown\";\n})(Env || (Env = {}));\nfunction runEnvChecks() {\n  var strategies = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    strategies[_i] = arguments[_i];\n  }\n  if (typeof window === 'undefined') {\n    return false;\n  }\n  for (var _a = 0, strategies_1 = strategies; _a < strategies_1.length; _a++) {\n    var strategy = strategies_1[_a];\n    var result = strategy();\n    if (result) {\n      return true;\n    }\n  }\n  return false;\n}\n/**\n * Runs checks that determine if user is using preact.\n * So far they are not ideal, as there is no consistent way to detect preact.\n * */\nfunction isPreact(context) {\n  return context.classRenderReceivesAnyArguments;\n}\n/**\n * Checks if user is using react.\n * */\nfunction isReact(context) {\n  return !context.classRenderReceivesAnyArguments;\n}\n/**\n * Runs checks that determine if user is using next.\n * Those checks should have almost 100% accuracy.\n * */\nfunction isNext() {\n  return runEnvChecks(function () {\n    return 'next' in window && Boolean(window.next);\n  }, function () {\n    return document.querySelector('script[id=__NEXT_DATA__]');\n  });\n}\n/**\n * Returns next version currently used by user.\n * */\nfunction getNextVersion() {\n  var _a;\n  return (_a = window === null || window === void 0 ? void 0 : window.next) === null || _a === void 0 ? void 0 : _a.version;\n}\n/**\n * Attempts to determine user environment.\n * */\nfunction detectEnvironment(_a) {\n  var context = _a.context;\n  if (isNext()) {\n    return {\n      name: Env.Next,\n      version: getNextVersion()\n    };\n  }\n  if (isPreact(context)) {\n    return {\n      name: Env.Preact\n    };\n  }\n  if (isReact(context)) {\n    return {\n      name: Env.React\n    };\n  }\n  return {\n    name: Env.Unknown\n  };\n}\nfunction getEnvironment(params) {\n  try {\n    var parsedEnv = JSON.parse(env);\n    if (typeof parsedEnv === 'object') {\n      return parsedEnv;\n    }\n  } catch (_a) {\n    // Nothing here...\n  }\n  return detectEnvironment(params);\n}\n\n/**\n * Utility component that synchronously detects the current environment (React/Preact etc.) and\n * provides it as a prop to the child element.\n *\n * @example\n * ```jsx\n * const App = ({ env }: { env: EnvDetails }) => `I'm running in ${env.name}!`\n *\n * <WithEnvironment>\n *  <App />\n * </WithEnvironment>\n * ```\n */\nvar WithEnvironment = /** @class */function (_super) {\n  __extends(WithEnvironment, _super);\n  function WithEnvironment(props) {\n    return _super.call(this, props) || this;\n  }\n  WithEnvironment.prototype.render = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (!this.detectedEnv) {\n      // unlike React, class components in Preact always receive `props` and `state` in render()\n      // this is true for both Preact 8.x and 10.x\n      var hasAnyArguments = args.length > 0;\n      var detectParams = {\n        context: {\n          classRenderReceivesAnyArguments: hasAnyArguments\n        }\n      };\n      this.detectedEnv = getEnvironment(detectParams);\n    }\n    // passes the `env` down as a prop\n    return cloneElement(this.props.children, {\n      env: this.detectedEnv\n    });\n  };\n  return WithEnvironment;\n}(Component);\nvar pkgName = name.split('/')[1];\n/**\n * @example\n * ```jsx\n * <FpjsProvider\n *   loadOptions = {{\n *     apiKey: \"<your-fpjs-public-api-key>\"\n *   }}\n *   cacheTime={60 * 10}\n *   cacheLocation={CacheLocation.LocalStorage}\n * >\n *   <MyApp />\n * </FpjsProvider>\n * ```\n *\n * Provides the FpjsContext to its child components.\n *\n * @privateRemarks\n * This is just a wrapper around the actual provider.\n * For the implementation, see `ProviderWithEnv` component.\n */\nfunction FpjsProvider(props) {\n  var propsWithEnv = props;\n  return jsx(WithEnvironment, {\n    children: jsx(ProviderWithEnv, __assign({}, propsWithEnv))\n  });\n}\nfunction ProviderWithEnv(_a) {\n  var _this = this;\n  var children = _a.children,\n    forceRebuild = _a.forceRebuild,\n    cache = _a.cache,\n    cacheTimeInSeconds = _a.cacheTimeInSeconds,\n    cachePrefix = _a.cachePrefix,\n    cacheLocation = _a.cacheLocation,\n    loadOptions = _a.loadOptions,\n    env = _a.env;\n  var clientRef = useRef();\n  var clientInitPromiseRef = useRef();\n  var clientOptions = useMemo(function () {\n    return {\n      cache: cache,\n      cacheTimeInSeconds: cacheTimeInSeconds,\n      cachePrefix: cachePrefix,\n      cacheLocation: cacheLocation,\n      loadOptions: loadOptions\n    };\n  }, [loadOptions, cache, cacheTimeInSeconds, cachePrefix, cacheLocation]);\n  var createClient = useCallback(function () {\n    var integrationInfo = \"\".concat(pkgName, \"/\").concat(version);\n    if (env) {\n      var envInfo = env.version ? \"\".concat(env.name, \"/\").concat(env.version) : env.name;\n      integrationInfo += \"/\".concat(envInfo);\n    }\n    var parsedClientOptions = __assign(__assign({}, clientOptions), {\n      loadOptions: __assign(__assign({}, loadOptions), {\n        integrationInfo: __spreadArray(__spreadArray([], loadOptions.integrationInfo || [], true), [integrationInfo], false)\n      })\n    });\n    var createdClient = new FpjsClient(parsedClientOptions);\n    clientInitPromiseRef.current = createdClient.init();\n    return createdClient;\n  }, [clientOptions, env, loadOptions]);\n  var getClient = useCallback(function () {\n    return __awaiter(_this, void 0, void 0, function () {\n      var _this = this;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (isSSR()) {\n              throw new Error('FpjsProvider client cannot be used in SSR');\n            }\n            if (!!clientRef.current) return [3 /*break*/, 2];\n            return [4 /*yield*/, waitUntil({\n              checkCondition: function () {\n                return Boolean(clientRef.current);\n              }\n            }).catch(function () {\n              return __awaiter(_this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                  /**\n                   * We did timeout waiting for ideal condition to create client (eg: env detection)\n                   * Attempt to create client now, potentially without some additional information that might be useful but are not required.\n                   * */\n                  createClient();\n                  return [2 /*return*/];\n                });\n              });\n            })];\n\n          case 1:\n            _a.sent();\n            _a.label = 2;\n          case 2:\n            return [2 /*return*/, clientRef.current];\n        }\n      });\n    });\n  }, [createClient]);\n  var getVisitorData = useCallback(function (options, ignoreCache) {\n    return __awaiter(_this, void 0, void 0, function () {\n      var client;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, getClient()];\n          case 1:\n            client = _a.sent();\n            return [4 /*yield*/, clientInitPromiseRef.current];\n          case 2:\n            _a.sent();\n            return [2 /*return*/, client.getVisitorData(options, ignoreCache)];\n        }\n      });\n    });\n  }, [getClient]);\n  var clearCache = useCallback(function () {\n    return __awaiter(_this, void 0, void 0, function () {\n      var client;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, getClient()];\n          case 1:\n            client = _a.sent();\n            return [4 /*yield*/, client.clearCache()];\n          case 2:\n            _a.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  }, [getClient]);\n  var contextValue = useMemo(function () {\n    return {\n      clearCache: clearCache,\n      getVisitorData: getVisitorData\n    };\n  }, [clearCache, getVisitorData]);\n  useEffect(function () {\n    // By default, the client is always initialized once during the first render and won't be updated\n    // if the configuration changes. Use `forceRebuilt` flag to disable this behaviour.\n    if (!clientRef.current || forceRebuild) {\n      clientRef.current = createClient();\n    }\n  }, [forceRebuild, clientOptions, createClient]);\n  return jsx(FpjsContext.Provider, __assign({\n    value: contextValue\n  }, {\n    children: children\n  }));\n}\nfunction usePrevious(value) {\n  var ref = useRef();\n  useEffect(function () {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\nfunction toError(error) {\n  if (error instanceof Error) {\n    return error;\n  }\n  return new Error(String(error));\n}\nfunction assertIsTruthy(value, name) {\n  if (!value) {\n    throw new TypeError(\"\".concat(name, \" must not be null or undefined\"));\n  }\n}\n\n/**\n *  @example\n * ```js\n *  const {\n *    // Request state\n *    data,\n *    isLoading,\n *    error,\n *    // A method to be called manually when the `immediate` field in the config is set to `false`:\n *    getData,\n *  } = useVisitorData({ extended: true }, { immediate: false });\n * ```\n * Use the `useVisitorData` hook in your components to perform identification requests with the FingerprintJS API. The returned object contains information about loading status, errors, and visitor.\n *\n * @param getOptions options for the `fp.get()` request\n * @param config config for the hook\n */\nfunction useVisitorData(getOptions, config) {\n  var _this = this;\n  if (getOptions === void 0) {\n    getOptions = {};\n  }\n  if (config === void 0) {\n    config = defaultUseVisitorDataConfig;\n  }\n  assertIsTruthy(getOptions, 'getOptions');\n  var previousGetOptions = usePrevious(getOptions);\n  var immediate = config.immediate;\n  var getVisitorData = useContext(FpjsContext).getVisitorData;\n  var initialState = {\n    isLoading: false\n  };\n  var _a = useState(initialState),\n    state = _a[0],\n    setState = _a[1];\n  var getData = useCallback(function (params) {\n    if (params === void 0) {\n      params = {};\n    }\n    return __awaiter(_this, void 0, void 0, function () {\n      var ignoreCache, defaultIgnoreCache, getVisitorDataOptions, result_1, unknownError_1, error_1;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            assertIsTruthy(params, 'getDataParams');\n            ignoreCache = params.ignoreCache;\n            _a.label = 1;\n          case 1:\n            _a.trys.push([1, 3, 4, 5]);\n            setState(function (state) {\n              return __assign(__assign({}, state), {\n                isLoading: true\n              });\n            });\n            defaultIgnoreCache = getOptions.ignoreCache, getVisitorDataOptions = __rest(getOptions, [\"ignoreCache\"]);\n            return [4 /*yield*/, getVisitorData(getVisitorDataOptions !== null && getVisitorDataOptions !== void 0 ? getVisitorDataOptions : {}, typeof ignoreCache === 'boolean' ? ignoreCache : defaultIgnoreCache)];\n          case 2:\n            result_1 = _a.sent();\n            setState(function (state) {\n              return __assign(__assign({}, state), {\n                data: result_1,\n                isLoading: false,\n                error: undefined\n              });\n            });\n            return [2 /*return*/, result_1];\n          case 3:\n            unknownError_1 = _a.sent();\n            error_1 = toError(unknownError_1);\n            error_1.name = 'FPJSAgentError';\n            setState(function (state) {\n              return __assign(__assign({}, state), {\n                data: undefined,\n                error: error_1\n              });\n            });\n            throw error_1;\n          case 4:\n            setState(function (state) {\n              return state.isLoading ? __assign(__assign({}, state), {\n                isLoading: false\n              }) : state;\n            });\n            return [7 /*endfinally*/];\n          case 5:\n            return [2 /*return*/];\n        }\n      });\n    });\n  }, [getOptions, getVisitorData]);\n  useEffect(function () {\n    if (immediate && (!previousGetOptions || !deepEquals(getOptions, previousGetOptions))) {\n      getData().catch(function (error) {\n        console.error(\"Failed to fetch visitor data on mount: \".concat(error));\n      });\n    }\n  }, [immediate, getData, previousGetOptions, getOptions]);\n  var isLoading = state.isLoading,\n    data = state.data,\n    error = state.error;\n  return {\n    getData: getData,\n    isLoading: isLoading,\n    data: data,\n    error: error\n  };\n}\nvar defaultUseVisitorDataConfig = {\n  immediate: true\n};\nexport { FpjsContext, FpjsProvider, useVisitorData };","map":{"version":3,"mappings":"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","names":["stub","Error","initialContext","getVisitorData","clearCache","FpjsContext","createContext","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","pop","push","__spreadArray","to","from","pack","l","ar","slice","concat","isSSR","window","document","waitUntil","_a","_b","intervalMs","_c","timeoutMs","timeoutId","setTimeout","clearInterval","interval","setInterval","checkCondition","clearTimeout","env","Env","runEnvChecks","strategies","_i","strategies_1","strategy","isPreact","context","classRenderReceivesAnyArguments","isReact","isNext","Boolean","querySelector","getNextVersion","detectEnvironment","name","Next","version","Preact","React","Unknown","getEnvironment","params","parsedEnv","JSON","parse","props","WithEnvironment","args","detectedEnv","hasAnyArguments","detectParams","cloneElement","children","Component","pkgName","packageInfo.name","split","FpjsProvider","propsWithEnv","_jsx","ProviderWithEnv","_this","forceRebuild","cache","cacheTimeInSeconds","cachePrefix","cacheLocation","loadOptions","clientRef","useRef","clientInitPromiseRef","clientOptions","useMemo","createClient","useCallback","integrationInfo","packageInfo.version","envInfo","parsedClientOptions","createdClient","FpjsClient","current","init","getClient","catch","options","ignoreCache","client","contextValue","useEffect","Provider","usePrevious","ref","toError","error","getOptions","config","assertIsTruthy","previousGetOptions","useContext","initialState","isLoading","useState","state","setState","getData","defaultIgnoreCache","getVisitorDataOptions","result_1","data","undefined","error_1","unknownError_1","immediate","deepEquals","console","defaultUseVisitorDataConfig"],"sources":["/Users/sg17lpt/Developer/simple-camera-app/node_modules/@fingerprintjs/fingerprintjs-pro-react/src/fpjs-context.ts","/Users/sg17lpt/Developer/simple-camera-app/node_modules/@fingerprintjs/fingerprintjs-pro-react/node_modules/tslib/tslib.es6.js","/Users/sg17lpt/Developer/simple-camera-app/node_modules/@fingerprintjs/fingerprintjs-pro-react/src/ssr.ts","/Users/sg17lpt/Developer/simple-camera-app/node_modules/@fingerprintjs/fingerprintjs-pro-react/src/utils/wait-until.ts","/Users/sg17lpt/Developer/simple-camera-app/node_modules/@fingerprintjs/fingerprintjs-pro-react/src/env.ts","/Users/sg17lpt/Developer/simple-camera-app/node_modules/@fingerprintjs/fingerprintjs-pro-react/src/env.types.ts","/Users/sg17lpt/Developer/simple-camera-app/node_modules/@fingerprintjs/fingerprintjs-pro-react/src/detect-env.ts","/Users/sg17lpt/Developer/simple-camera-app/node_modules/@fingerprintjs/fingerprintjs-pro-react/src/get-env.ts","/Users/sg17lpt/Developer/simple-camera-app/node_modules/@fingerprintjs/fingerprintjs-pro-react/src/components/with-environment.tsx","/Users/sg17lpt/Developer/simple-camera-app/node_modules/@fingerprintjs/fingerprintjs-pro-react/src/components/fpjs-provider.tsx","/Users/sg17lpt/Developer/simple-camera-app/node_modules/@fingerprintjs/fingerprintjs-pro-react/src/utils/use-previous.ts","/Users/sg17lpt/Developer/simple-camera-app/node_modules/@fingerprintjs/fingerprintjs-pro-react/src/utils/to-error.ts","/Users/sg17lpt/Developer/simple-camera-app/node_modules/@fingerprintjs/fingerprintjs-pro-react/src/utils/assert-is-truthy.ts","/Users/sg17lpt/Developer/simple-camera-app/node_modules/@fingerprintjs/fingerprintjs-pro-react/src/use-visitor-data.ts"],"sourcesContent":["import { createContext } from 'react'\nimport { VisitorData, GetOptions } from '@fingerprintjs/fingerprintjs-pro-spa'\n\nexport interface QueryResult<TData, TError = Error> {\n  /**\n   * Stores current query data\n   * */\n  data?: TData\n  /**\n   * Is true while query is loading\n   * */\n  isLoading?: boolean\n  /**\n   * Stores current query error\n   * */\n  error?: TError\n}\n\nexport interface VisitorQueryResult<TExtended extends boolean> extends QueryResult<VisitorData<TExtended>> {\n  data?: VisitorData<TExtended>\n}\n\nexport interface GetDataOptions {\n  /**\n   * When set to true, the visitor data will always be fetched from our API.\n   * */\n  ignoreCache?: boolean\n}\n\nexport interface VisitorQueryContext<TExtended extends boolean> extends VisitorQueryResult<TExtended> {\n  /**\n   * Performs identification request to server and returns visitors data.\n   * */\n  getData: (getDataOptions?: GetDataOptions) => Promise<VisitorData<TExtended>>\n}\n\nconst stub = (): never => {\n  throw new Error('You forgot to wrap your component in <FpjsProvider>.')\n}\n\nconst initialContext = {\n  getVisitorData: stub,\n  clearCache: stub,\n}\n\n/**\n * The FingerprintJS Context\n */\nexport interface FpjsContextInterface<TExtended extends boolean> {\n  getVisitorData: (config?: GetOptions<TExtended>, ignoreCache?: boolean) => Promise<VisitorData<TExtended>>\n  clearCache: () => void\n}\n\nconst FpjsContext = createContext<FpjsContextInterface<any>>(initialContext)\n\nexport default FpjsContext\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","export const isSSR = () => typeof window === 'undefined' || typeof window.document === 'undefined'\n","export interface WaitUntilParams {\n  checkCondition: () => boolean\n  timeoutMs?: number\n  intervalMs?: number\n}\n\nexport function waitUntil({ checkCondition, intervalMs = 250, timeoutMs = 2000 }: WaitUntilParams) {\n  return new Promise<void>((resolve, reject) => {\n    const timeoutId = setTimeout(() => {\n      clearInterval(interval)\n\n      reject(new Error('Timeout'))\n    }, timeoutMs)\n\n    const interval = setInterval(() => {\n      if (checkCondition()) {\n        clearTimeout(timeoutId)\n        clearInterval(interval)\n        resolve()\n      }\n    }, intervalMs)\n  })\n}\n","export const env = '%DETECTED_ENV%'\n","export enum Env {\n  React = 'react',\n  Preact = 'preact',\n  Next = 'next',\n  Unknown = 'unknown',\n}\n\nexport interface EnvDetails {\n  name: Env\n  version?: string\n}\n","import { Env, type EnvDetails } from './env.types'\n\nexport interface DetectEnvContext {\n  classRenderReceivesAnyArguments: boolean\n}\n\nexport interface DetectEnvParams {\n  context: DetectEnvContext\n}\n\ntype EnvCheckStrategy = () => unknown\n\nfunction runEnvChecks(...strategies: EnvCheckStrategy[]) {\n  if (typeof window === 'undefined') {\n    return false\n  }\n\n  for (const strategy of strategies) {\n    const result = strategy()\n\n    if (result) {\n      return true\n    }\n  }\n\n  return false\n}\n\n/**\n * Runs checks that determine if user is using preact.\n * So far they are not ideal, as there is no consistent way to detect preact.\n * */\nfunction isPreact(context: DetectEnvContext) {\n  return context.classRenderReceivesAnyArguments\n}\n\n/**\n * Checks if user is using react.\n * */\nfunction isReact(context: DetectEnvContext) {\n  return !context.classRenderReceivesAnyArguments\n}\n\n/**\n * Runs checks that determine if user is using next.\n * Those checks should have almost 100% accuracy.\n * */\nfunction isNext() {\n  return runEnvChecks(\n    () => 'next' in window && Boolean((window as { next?: unknown }).next),\n    () => document.querySelector('script[id=__NEXT_DATA__]')\n  )\n}\n\n/**\n * Returns next version currently used by user.\n * */\nfunction getNextVersion() {\n  return (window as { next?: { version?: string } })?.next?.version\n}\n\n/**\n * Attempts to determine user environment.\n * */\nexport function detectEnvironment({ context }: DetectEnvParams): EnvDetails {\n  if (isNext()) {\n    return {\n      name: Env.Next,\n      version: getNextVersion(),\n    }\n  }\n\n  if (isPreact(context)) {\n    return {\n      name: Env.Preact,\n    }\n  }\n\n  if (isReact(context)) {\n    return {\n      name: Env.React,\n    }\n  }\n\n  return {\n    name: Env.Unknown,\n  }\n}\n","import { env } from './env'\nimport { EnvDetails } from './env.types'\nimport { detectEnvironment, type DetectEnvParams } from './detect-env'\n\nexport function getEnvironment(params: DetectEnvParams) {\n  try {\n    const parsedEnv = JSON.parse(env)\n\n    if (typeof parsedEnv === 'object') {\n      return parsedEnv as EnvDetails\n    }\n  } catch {\n    // Nothing here...\n  }\n\n  return detectEnvironment(params)\n}\n","import { cloneElement, Component } from 'react'\n\nimport { getEnvironment } from '../get-env'\nimport { type DetectEnvParams } from '../detect-env'\nimport { type EnvDetails } from '../env.types'\n\nexport interface WithEnvironmentProps {\n  // exactly one element must be provided\n  children: JSX.Element\n}\n\n/**\n * Utility component that synchronously detects the current environment (React/Preact etc.) and\n * provides it as a prop to the child element.\n *\n * @example\n * ```jsx\n * const App = ({ env }: { env: EnvDetails }) => `I'm running in ${env.name}!`\n *\n * <WithEnvironment>\n *  <App />\n * </WithEnvironment>\n * ```\n */\nclass WithEnvironment extends Component<WithEnvironmentProps> {\n  constructor(props: WithEnvironmentProps) {\n    super(props)\n  }\n\n  detectedEnv: EnvDetails | undefined\n\n  render(...args: any[]) {\n    if (!this.detectedEnv) {\n      // unlike React, class components in Preact always receive `props` and `state` in render()\n      // this is true for both Preact 8.x and 10.x\n      const hasAnyArguments = args.length > 0\n      const detectParams: DetectEnvParams = {\n        context: { classRenderReceivesAnyArguments: hasAnyArguments },\n      }\n\n      this.detectedEnv = getEnvironment(detectParams)\n    }\n\n    // passes the `env` down as a prop\n    return cloneElement(this.props.children, { env: this.detectedEnv })\n  }\n}\n\nexport { WithEnvironment }\n","import { PropsWithChildren, useCallback, useEffect, useMemo, useRef } from 'react'\nimport FpjsContext from '../fpjs-context'\nimport { FpjsClient, FpjsClientOptions } from '@fingerprintjs/fingerprintjs-pro-spa'\nimport * as packageInfo from '../../package.json'\nimport { isSSR } from '../ssr'\nimport { waitUntil } from '../utils/wait-until'\nimport { WithEnvironment } from './with-environment'\nimport type { EnvDetails } from '../env.types'\n\nconst pkgName = packageInfo.name.split('/')[1]\n\ninterface FpjsProviderOptions extends FpjsClientOptions {\n  /**\n   * If set to `true`, will force FpjsClient to be rebuilt with the new options. Should be used with caution\n   * since it can be triggered too often (e.g. on every render) and negatively affect performance of the JS agent.\n   */\n  forceRebuild?: boolean\n}\n\n/**\n * @example\n * ```jsx\n * <FpjsProvider\n *   loadOptions = {{\n *     apiKey: \"<your-fpjs-public-api-key>\"\n *   }}\n *   cacheTime={60 * 10}\n *   cacheLocation={CacheLocation.LocalStorage}\n * >\n *   <MyApp />\n * </FpjsProvider>\n * ```\n *\n * Provides the FpjsContext to its child components.\n *\n * @privateRemarks\n * This is just a wrapper around the actual provider.\n * For the implementation, see `ProviderWithEnv` component.\n */\nexport function FpjsProvider<T extends boolean>(props: PropsWithChildren<FpjsProviderOptions>) {\n  const propsWithEnv = props as PropsWithChildren<ProviderWithEnvProps>\n\n  return (\n    <WithEnvironment>\n      <ProviderWithEnv<T> {...propsWithEnv} />\n    </WithEnvironment>\n  )\n}\n\ninterface ProviderWithEnvProps extends FpjsProviderOptions {\n  /**\n   * Contains details about the env we're currently running in (e.g. framework, version)\n   */\n  env: EnvDetails\n}\n\nfunction ProviderWithEnv<TExtended extends boolean>({\n  children,\n  forceRebuild,\n  cache,\n  cacheTimeInSeconds,\n  cachePrefix,\n  cacheLocation,\n  loadOptions,\n  env,\n}: PropsWithChildren<ProviderWithEnvProps>) {\n  const clientRef = useRef<FpjsClient>()\n  const clientInitPromiseRef = useRef<Promise<unknown>>()\n\n  const clientOptions = useMemo(() => {\n    return {\n      cache,\n      cacheTimeInSeconds,\n      cachePrefix,\n      cacheLocation,\n      loadOptions,\n    }\n  }, [loadOptions, cache, cacheTimeInSeconds, cachePrefix, cacheLocation])\n\n  const createClient = useCallback(() => {\n    let integrationInfo = `${pkgName}/${packageInfo.version}`\n\n    if (env) {\n      const envInfo = env.version ? `${env.name}/${env.version}` : env.name\n\n      integrationInfo += `/${envInfo}`\n    }\n\n    const parsedClientOptions = {\n      ...clientOptions,\n      loadOptions: {\n        ...loadOptions,\n        integrationInfo: [...(loadOptions.integrationInfo || []), integrationInfo],\n      },\n    }\n\n    const createdClient = new FpjsClient(parsedClientOptions)\n\n    clientInitPromiseRef.current = createdClient.init()\n\n    return createdClient\n  }, [clientOptions, env, loadOptions])\n\n  const getClient = useCallback(async () => {\n    if (isSSR()) {\n      throw new Error('FpjsProvider client cannot be used in SSR')\n    }\n\n    if (!clientRef.current) {\n      await waitUntil({\n        checkCondition: () => Boolean(clientRef.current),\n      }).catch(async () => {\n        /**\n         * We did timeout waiting for ideal condition to create client (eg: env detection)\n         * Attempt to create client now, potentially without some additional information that might be useful but are not required.\n         * */\n        createClient()\n      })\n    }\n\n    return clientRef.current!\n  }, [createClient])\n\n  const getVisitorData = useCallback(\n    async (options, ignoreCache) => {\n      const client = await getClient()\n\n      await clientInitPromiseRef.current\n\n      return client.getVisitorData<TExtended>(options, ignoreCache)\n    },\n    [getClient]\n  )\n\n  const clearCache = useCallback(async () => {\n    const client = await getClient()\n\n    await client.clearCache()\n  }, [getClient])\n\n  const contextValue = useMemo(() => {\n    return {\n      clearCache,\n      getVisitorData,\n    }\n  }, [clearCache, getVisitorData])\n\n  useEffect(() => {\n    // By default, the client is always initialized once during the first render and won't be updated\n    // if the configuration changes. Use `forceRebuilt` flag to disable this behaviour.\n    if (!clientRef.current || forceRebuild) {\n      clientRef.current = createClient()\n    }\n  }, [forceRebuild, clientOptions, createClient])\n\n  return <FpjsContext.Provider value={contextValue}>{children}</FpjsContext.Provider>\n}\n","import { useEffect, useRef } from 'react'\n\nexport function usePrevious<T>(value: T) {\n  const ref = useRef<T>()\n\n  useEffect(() => {\n    ref.current = value\n  }, [value])\n\n  return ref.current\n}\n","export function toError(error: unknown) {\n  if (error instanceof Error) {\n    return error\n  }\n\n  return new Error(String(error))\n}\n","export function assertIsTruthy<T>(value: T, name: string): asserts value is NonNullable<T> {\n  if (!value) {\n    throw new TypeError(`${name} must not be null or undefined`)\n  }\n}\n","import FpjsContext, { FpjsContextInterface, GetDataOptions, QueryResult, VisitorQueryContext } from './fpjs-context'\nimport { useCallback, useContext, useEffect, useState } from 'react'\nimport { GetOptions, VisitorData } from '@fingerprintjs/fingerprintjs-pro-spa'\nimport { usePrevious } from './utils/use-previous'\nimport deepEquals from 'fast-deep-equal'\nimport { toError } from './utils/to-error'\nimport { assertIsTruthy } from './utils/assert-is-truthy'\n\nexport type UseVisitorDataOptions<TExtended extends boolean> = GetOptions<TExtended> & Partial<GetDataOptions>\n\n/**\n *  @example\n * ```js\n *  const {\n *    // Request state\n *    data,\n *    isLoading,\n *    error,\n *    // A method to be called manually when the `immediate` field in the config is set to `false`:\n *    getData,\n *  } = useVisitorData({ extended: true }, { immediate: false });\n * ```\n * Use the `useVisitorData` hook in your components to perform identification requests with the FingerprintJS API. The returned object contains information about loading status, errors, and visitor.\n *\n * @param getOptions options for the `fp.get()` request\n * @param config config for the hook\n */\nexport function useVisitorData<TExtended extends boolean>(\n  getOptions: UseVisitorDataOptions<TExtended> = {},\n  config: UseVisitorDataConfig = defaultUseVisitorDataConfig\n): VisitorQueryContext<TExtended> {\n  assertIsTruthy(getOptions, 'getOptions')\n\n  const previousGetOptions = usePrevious(getOptions)\n\n  const { immediate } = config\n  const { getVisitorData } = useContext<FpjsContextInterface<TExtended>>(FpjsContext)\n\n  const initialState = { isLoading: false }\n  const [state, setState] = useState<QueryResult<VisitorData<TExtended>>>(initialState)\n\n  const getData = useCallback<VisitorQueryContext<TExtended>['getData']>(\n    async (params = {}) => {\n      assertIsTruthy(params, 'getDataParams')\n\n      const { ignoreCache } = params\n\n      try {\n        setState((state) => ({ ...state, isLoading: true }))\n\n        const { ignoreCache: defaultIgnoreCache, ...getVisitorDataOptions } = getOptions\n\n        const result = await getVisitorData(\n          getVisitorDataOptions ?? {},\n          typeof ignoreCache === 'boolean' ? ignoreCache : defaultIgnoreCache\n        )\n        setState((state) => ({ ...state, data: result, isLoading: false, error: undefined }))\n        return result\n      } catch (unknownError) {\n        const error = toError(unknownError)\n\n        error.name = 'FPJSAgentError'\n\n        setState((state) => ({ ...state, data: undefined, error }))\n\n        throw error\n      } finally {\n        setState((state) => (state.isLoading ? { ...state, isLoading: false } : state))\n      }\n    },\n    [getOptions, getVisitorData]\n  )\n\n  useEffect(() => {\n    if (immediate && (!previousGetOptions || !deepEquals(getOptions, previousGetOptions))) {\n      getData().catch((error) => {\n        console.error(`Failed to fetch visitor data on mount: ${error}`)\n      })\n    }\n  }, [immediate, getData, previousGetOptions, getOptions])\n\n  const { isLoading, data, error } = state\n\n  return {\n    getData,\n    isLoading,\n    data,\n    error,\n  }\n}\n\nexport interface UseVisitorDataConfig {\n  /**\n   * Determines whether the `getData()` method will be called immediately after the hook mounts or not\n   */\n  immediate: boolean\n}\n\nconst defaultUseVisitorDataConfig = { immediate: true }\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}