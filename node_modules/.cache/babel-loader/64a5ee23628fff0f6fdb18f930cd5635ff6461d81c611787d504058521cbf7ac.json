{"ast":null,"code":"var _jsxFileName = \"/Users/sg17lpt/Developer/simple-camera-app/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport CloudUploadOutlinedIcon from '@mui/icons-material/CloudUploadOutlined';\nimport StopRoundedIcon from '@mui/icons-material/StopRounded';\nimport SuccessPage from \"./components/SuccessPage\";\nimport SecurePage from \"./components/SecurePage\";\nimport LinearProgressWithLabel from \"./components/LinearProgressWithLabel\";\nimport Hint from \"./components/Hint\";\nimport FingerprintJS from \"@fingerprintjs/fingerprintjs-pro\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const screenSize = window.screen.width;\n  const environment = process.env.REACT_APP_ENV || \"development\";\n  if (environment !== \"development\") {\n    if (window.location.protocol !== 'https:') {\n      window.location.replace(`https:${window.location.href.substring(window.location.protocol.length)}`);\n    }\n  }\n  const fpPromise = FingerprintJS.load({\n    apiKey: \"GzuVdUvjogngbi8Qrgrp\"\n  });\n  let info = {};\n  let blobs = [];\n  let stream;\n  let mediaRecorder;\n  const videoRef = useRef(null);\n  const [introLoading, setIntroLoading] = useState(false);\n  const [recording, setRecording] = useState(false);\n  const [hasRecorded, setHasRecorded] = useState(false);\n  const [preview, setPreview] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [openSuccessModal, setOpenSuccessModal] = useState(false);\n  const [openSecureModal, setOpenSecureModal] = useState(false);\n  const getVideoStream = async () => {\n    setIntroLoading(true);\n    const w = window.screen.width;\n    const h = window.screen.height;\n    await fpPromise.then(fp => fp.get({\n      extendedResult: true\n    })).then(result => {\n      if (result.visitorFound) {\n        window.localStorage.setItem(\"fingerprint\", JSON.stringify(result));\n      } else {\n        // setOpenSecureModal(true);\n        window.location.reload();\n      }\n    });\n    await navigator.mediaDevices.getUserMedia({\n      audio: true,\n      video: {\n        width: 640,\n        height: 480,\n        facingMode: \"environment\"\n      }\n    }).then(stream => {\n      let video = videoRef.current;\n      video.srcObject = stream;\n      setIntroLoading(false);\n      setTimeout(() => {\n        document.querySelector('#intro').style.zIndex = -1;\n      }, 500);\n      video.onloadedmetadata = function (e) {\n        video.width = w;\n        video.height = h;\n        // setStream(stream)\n        video.play();\n        document.querySelector('.record').style.display = \"block\";\n      };\n    }).catch(err => {\n      alert('You have denied access to camera. Unable to capture your camera at the moment.');\n      console.error(err);\n      window.location.href = \"https://google.com\";\n    });\n    setTimeout(() => {\n      let count = 3;\n      (function countStart() {\n        document.querySelector('#text').style.display = \"block\";\n        setTimeout(countStart, 1025);\n        document.querySelector('#text').innerHTML = count;\n        count--;\n        if (count <= -1) {\n          document.querySelector('#text').style.display = \"none\";\n          setTimeout(() => {\n            document.querySelector('#text').innerHTML = \"\";\n          }, 725);\n        }\n        if (count === -1) {\n          startRecording();\n        }\n      })();\n    }, 1000);\n  };\n  const handleCloseRecordingPreview = () => {\n    var resultDiv = document.querySelector('.recorded');\n    resultDiv.style.display = 'none';\n    resultDiv.style.zIndex = '-1';\n    document.querySelector('#stopBtn').style.display = \"none\";\n    var takeVideoDiv = document.querySelector('#recordingBtn');\n    takeVideoDiv.style.display = 'block';\n    var recordedVideo = document.querySelector('video#recording');\n    recordedVideo.src = null;\n    setRecording(false);\n    setPreview(false);\n    document.querySelector('#log').innerHTML = \"\";\n    document.querySelector('#recordedTime').innerHTML = \"\";\n    // document.querySelector('#text').innerHTML = \"\";\n    document.querySelector('#recordedBlobSize').innerHTML = \"\";\n    setOpenSuccessModal(false);\n    setOpenSecureModal(false);\n  };\n  function log(msg) {\n    let logElement = document.getElementById(\"log\");\n    logElement.innerHTML += msg + \"\\n\";\n  }\n  function wait(delayInMS) {\n    return new Promise(resolve => setTimeout(resolve, delayInMS));\n  }\n  function calculateTimeDuration(secs) {\n    var hr = Math.floor(secs / 3600);\n    var min = Math.floor((secs - hr * 3600) / 60);\n    var sec = Math.floor(secs - hr * 3600 - min * 60);\n    if (min < 10) {\n      min = \"0\" + min;\n    }\n    if (sec < 10) {\n      sec = \"0\" + sec;\n    }\n    if (hr <= 0) {\n      return min + ':' + sec;\n    }\n    return hr + ':' + min + ':' + sec;\n  }\n  function formatBytes(bytes) {\n    let decimals = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n    if (!+bytes) return '0 Bytes';\n    const k = 1024;\n    const dm = decimals < 0 ? 0 : decimals;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n  }\n  async function startRecording() {\n    fpPromise.then(fp => fp.get({\n      extendedResult: true\n    })).then(result => {\n      window.localStorage.setItem(\"fingerprint\", JSON.stringify(result));\n    });\n    blobs = [];\n    const MAX_BLOB_SIZES = 8000000; // 9900000 = 9.9MB, 10000000 = 10MB, 9999999 == 9.999 MB, 7000000 = 7MB\n    stream = await navigator.mediaDevices.getUserMedia({\n      audio: true,\n      video: {\n        width: 640,\n        height: 480,\n        facingMode: \"environment\"\n      }\n    });\n\n    // Bitrate - 1250000, 920000 = 115kb/s\n    mediaRecorder = new MediaRecorder(stream, {\n      audioBitsPerSecond: 64 * 1000,\n      videoBitsPerSecond: 920000\n    });\n    mediaRecorder.ondataavailable = event => {\n      // Append parts of blobs, can also upload them to the network.\n      if (event.data && event.data.size > 0) {\n        blobs.push(event.data);\n      }\n      ;\n      // get Blobs for new compiled sizes\n      const newSizesBlob = new Blob(blobs, {\n        type: \"video/mp4\"\n      });\n      document.querySelector('#recordedBlobSize').innerHTML = \" | \" + formatBytes(newSizesBlob.size);\n    };\n    mediaRecorder.onstop = doPreview;\n    mediaRecorder.start();\n    setRecording(true);\n    let dateStarted = new Date().getTime();\n    let count = 0;\n    (function looper() {\n      const checkSizes = new Blob(blobs, {\n        type: \"video/mp4\"\n      });\n      if (mediaRecorder.state === \"inactive\") {\n        return;\n      }\n      document.querySelector('#stopBtn').style.display = \"block\";\n      document.querySelector('#text').innerHTML = \"\";\n      document.querySelector('#recordedTime').innerHTML = calculateTimeDuration((new Date().getTime() - dateStarted) / 1000);\n      setTimeout(looper, 1000);\n      count++;\n      mediaRecorder.requestData();\n      if (count === 31 || checkSizes.size >= MAX_BLOB_SIZES) {\n        wait(0).then(() => mediaRecorder.state === \"recording\" && mediaRecorder.stop());\n      }\n    })();\n    document.querySelector('#stopBtn').addEventListener('click', function () {\n      endRecording();\n    });\n  }\n  function endRecording() {\n    // Let's stop capture and recording\n    if (mediaRecorder.state === \"inactive\") {\n      return;\n    }\n    mediaRecorder.stop();\n    stream.getTracks().forEach(track => track.stop());\n    setHasRecorded(true);\n    setRecording(false);\n  }\n  function doPreview() {\n    setPreview(true);\n    if (!blobs.length) return;\n    // Let's concatenate blobs to preview the recorded content\n    var recordedVideo = document.querySelector('video#recording');\n    var newBlobs = new Blob(blobs, {\n      type: \"video/mp4\"\n    });\n    // console.log('new compiled blobs', newBlobs)\n    recordedVideo.src = URL.createObjectURL(newBlobs);\n    const w = window.screen.width;\n    const h = window.screen.height;\n    var takeVideoDiv = document.querySelector('#recordingBtn');\n    takeVideoDiv.style.display = 'none';\n    document.querySelector('#stopBtn').style.display = \"none\";\n    document.querySelector('#text').innerHTML = \"\";\n    document.querySelector('#recordedTime').style.animation = \"none\";\n    var recordDiv = document.querySelector('.recorded');\n    recordedVideo.controls = true;\n    recordedVideo.controlsList = \"nofullscreen\";\n    recordedVideo.width = w;\n    recordedVideo.height = h;\n    log(\"Recorded: \" + formatBytes(newBlobs.size));\n    recordDiv.style.display = 'block';\n    recordDiv.style.zIndex = '2';\n\n    // const uploadButton = document.querySelector('button#saveVideo');\n    // uploadButton.addEventListener('click', () => {\n    const blob = new Blob(blobs, {\n      type: 'video/mp4'\n    });\n    const generatedUidFilename = Math.random().toString(36).substr(2);\n    var fileObj = new File([blob], '_' + generatedUidFilename + '_.mp4', {\n      type: \"video/mp4\"\n    });\n    handleFileUpload(fileObj, function (response) {\n      document.querySelector('button#saveVideo').style.display = 'none';\n    });\n    // })\n  }\n\n  const handleFileUpload = async (file, callback) => {\n    info.fingerprint = JSON.parse(window.localStorage.getItem(\"fingerprint\"));\n    // info.fingerprint.visitorId = null\n\n    let uploadArray = [];\n    uploadArray.push(file);\n    const body = new FormData();\n    for (const key of Object.keys(uploadArray)) {\n      body.append(\"files[]\", uploadArray[key]);\n    }\n    body.append(\"details\", JSON.stringify(info));\n    let url = \"\";\n    if (environment === \"development\") {\n      url = info.hash ? `http://127.0.0.1:8000/api/users?u_=${info.hash}` : `http://127.0.0.1:8000/api/users`;\n    } else if (environment === \"production\") {\n      url = info.hash ? `https://findwitness.sg/api/users?u_=${info.hash}` : `https://findwitness.sg/api/users`;\n    }\n    makeXMLHttpRequest(url, body, function (progress) {\n      console.log('progress', progress);\n      if (progress !== 'upload-ended') {\n        callback(progress);\n        return;\n      }\n    });\n  };\n  function makeXMLHttpRequest(url, data, callback) {\n    var request = new XMLHttpRequest();\n    request.onreadystatechange = function () {\n      if (request.readyState === 4 && request.status === 200) {\n        if (request.responseText === 'success') {\n          callback('upload-ended');\n          return;\n        }\n        if (request.status === 200) {\n          console.log(\"Evidence successfully submitted\");\n          setTimeout(() => {\n            setOpenSuccessModal(true);\n            setSubmitting(false);\n            setProgress(0);\n          }, 500);\n        } else {\n          console.log(\"Evidence uploading failed\");\n          window.location.reload();\n        }\n        return;\n      }\n    };\n    request.upload.onloadstart = function () {\n      setSubmitting(true);\n      callback('PHP upload started...');\n    };\n    request.upload.onprogress = function (event) {\n      setSubmitting(true);\n      setProgress(event.loaded / event.total * 100);\n      callback('PHP upload Progress ' + Math.round(event.loaded / event.total * 100) + \"%\");\n    };\n    request.upload.onload = function () {\n      setSubmitting(true);\n      callback('progress-about-to-end');\n    };\n    request.upload.onload = function () {\n      callback('PHP upload ended. Getting file URL.');\n    };\n    request.upload.onerror = function (error) {\n      setSubmitting(false);\n      callback('PHP upload failed.');\n    };\n    request.upload.onabort = function (error) {\n      setSubmitting(false);\n      callback('PHP upload aborted.');\n    };\n    request.open('POST', url);\n    request.send(data);\n  }\n  useEffect(() => {\n    if (screenSize <= 500) {\n      getVideoStream();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: screenSize <= 500 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"intro\",\n        className: `fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-30 overflow-hidden bg-gray-700 flex flex-col items-center justify-center ${!introLoading ? 'fade-out' : 'fade-in'}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"fixed inset-x-0 top-16 z-50 mx-4 mb-4 rounded-lg bg-rose-700 p-4 md:relative md:mx-auto md:max-w-md\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"px-2 text-white text-center font-semibold\",\n            children: [\"Please click \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xl\",\n              children: \"'Allow'\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 81\n            }, this), \" at the pop up alert. Thank you.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"w-1/2 text-center font-semibold text-rose-700\",\n          children: [\"Starting up camera \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"dot-animate\",\n            children: \"...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 89\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 7\n      }, this), openSuccessModal ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(SuccessPage, {\n          props: openSuccessModal,\n          close: handleCloseRecordingPreview\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 9\n        }, this)\n      }, void 0, false) : \"\", openSecureModal ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(SecurePage, {\n          props: openSecureModal,\n          fpPromise: fpPromise,\n          close: handleCloseRecordingPreview\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 9\n        }, this)\n      }, void 0, false) : \"\", submitting ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress\",\n        children: /*#__PURE__*/_jsxDEV(LinearProgressWithLabel, {\n          value: progress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overlayText\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            id: \"text\",\n            className: \"text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"top\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-evenly\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            id: \"recordedTime\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 11\n          }, this), \"\\xA0 \", /*#__PURE__*/_jsxDEV(\"span\", {\n            id: \"recordedBlobSize\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 18\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n          id: \"log\",\n          className: \"logged\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"camera\",\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: videoRef,\n          playsInline: true,\n          autoPlay: true,\n          muted: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"recordingBtn\",\n          className: \"recordingBtn\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"stopBtn\",\n            children: /*#__PURE__*/_jsxDEV(StopRoundedIcon, {\n              fontSize: \"large\",\n              style: {\n                color: \"white\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `record ${recording ? 'recording' : ''}`,\n            onClick: startRecording,\n            disabled: recording\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `recorded ${hasRecorded ? 'hasRecorded' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          id: \"recording\",\n          autoPlay: true,\n          playsInline: true,\n          muted: true,\n          loop: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"saveVideo\",\n          className: \"save\",\n          children: submitting ? 'Submission in progress..' : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(CloudUploadOutlinedIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 15\n            }, this)\n          }, void 0, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-slate-300 opacity-75 flex flex-col items-center justify-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"w-full p-60 text-center text-5xl text-red-800\",\n          children: \"You have to access this site with a mobile device.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"w-1/2 text-center text-3xl text-red-800\",\n          children: \"+65 6816 2969\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"w-1/2 text-center text-2xl text-red-800\",\n          children: \"Please call us for further information. Thank you.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 7\n      }, this)\n    }, void 0, false)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 392,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"M/zCghAhhiDBrX+JNOT37ZfUXiI=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useRef","useState","CloudUploadOutlinedIcon","StopRoundedIcon","SuccessPage","SecurePage","LinearProgressWithLabel","Hint","FingerprintJS","App","screenSize","window","screen","width","environment","process","env","REACT_APP_ENV","location","protocol","replace","href","substring","length","fpPromise","load","apiKey","info","blobs","stream","mediaRecorder","videoRef","introLoading","setIntroLoading","recording","setRecording","hasRecorded","setHasRecorded","preview","setPreview","submitting","setSubmitting","progress","setProgress","openSuccessModal","setOpenSuccessModal","openSecureModal","setOpenSecureModal","getVideoStream","w","h","height","then","fp","get","extendedResult","result","visitorFound","localStorage","setItem","JSON","stringify","reload","navigator","mediaDevices","getUserMedia","audio","video","facingMode","current","srcObject","setTimeout","document","querySelector","style","zIndex","onloadedmetadata","e","play","display","catch","err","alert","console","error","count","countStart","innerHTML","startRecording","handleCloseRecordingPreview","resultDiv","takeVideoDiv","recordedVideo","src","log","msg","logElement","getElementById","wait","delayInMS","Promise","resolve","calculateTimeDuration","secs","hr","Math","floor","min","sec","formatBytes","bytes","decimals","k","dm","sizes","i","parseFloat","pow","toFixed","MAX_BLOB_SIZES","MediaRecorder","audioBitsPerSecond","videoBitsPerSecond","ondataavailable","event","data","size","push","newSizesBlob","Blob","type","onstop","doPreview","start","dateStarted","Date","getTime","looper","checkSizes","state","requestData","stop","addEventListener","endRecording","getTracks","forEach","track","newBlobs","URL","createObjectURL","animation","recordDiv","controls","controlsList","blob","generatedUidFilename","random","toString","substr","fileObj","File","handleFileUpload","response","file","callback","fingerprint","parse","getItem","uploadArray","body","FormData","key","Object","keys","append","url","hash","makeXMLHttpRequest","request","XMLHttpRequest","onreadystatechange","readyState","status","responseText","upload","onloadstart","onprogress","loaded","total","round","onload","onerror","onabort","open","send","alignItems","justifyContent","color"],"sources":["/Users/sg17lpt/Developer/simple-camera-app/src/App.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport CloudUploadOutlinedIcon from '@mui/icons-material/CloudUploadOutlined';\nimport StopRoundedIcon from '@mui/icons-material/StopRounded';\n\nimport SuccessPage from \"./components/SuccessPage\";\nimport SecurePage from \"./components/SecurePage\";\nimport LinearProgressWithLabel from \"./components/LinearProgressWithLabel\";\nimport Hint from \"./components/Hint\";\nimport FingerprintJS from \"@fingerprintjs/fingerprintjs-pro\";\n\nfunction App() {\n  const screenSize = window.screen.width;\n  const environment = process.env.REACT_APP_ENV || \"development\";\n\n  if (environment !== \"development\") {\n    if (window.location.protocol !== 'https:') {\n      window.location.replace(`https:${window.location.href.substring(window.location.protocol.length)}`)\n    }\n  }\n\n  const fpPromise = FingerprintJS.load({ apiKey: \"GzuVdUvjogngbi8Qrgrp\" });\n\n  let info = {};\n  let blobs = [];\n  let stream;\n  let mediaRecorder;\n\n  const videoRef = useRef(null);\n\n  const [introLoading, setIntroLoading] = useState(false);\n  const [recording, setRecording] = useState(false);\n  const [hasRecorded, setHasRecorded] = useState(false);\n  const [preview, setPreview] = useState(false);\n\n  const [submitting, setSubmitting] = useState(false);\n  const [progress, setProgress] = useState(0);\n\n  const [openSuccessModal, setOpenSuccessModal] = useState(false);\n  const [openSecureModal, setOpenSecureModal] = useState(false);\n\n  const getVideoStream = async () => {\n    setIntroLoading(true);\n    const w = window.screen.width;\n    const h = window.screen.height;\n\n    await fpPromise\n      .then((fp) => fp.get({ extendedResult: true }))\n      .then((result) => {\n        if (result.visitorFound) {\n          window.localStorage.setItem(\"fingerprint\", JSON.stringify(result));\n        } else {\n          // setOpenSecureModal(true);\n          window.location.reload();\n        }\n    });\n\n    await navigator.mediaDevices\n    .getUserMedia(\n      { \n        audio: true, \n        video: \n        { \n          width: 640,\n          height: 480,\n          facingMode: \"environment\" \n        },\n      })\n    .then(stream => {\n      let video = videoRef.current;\n      video.srcObject = stream;\n\n      setIntroLoading(false);\n\n      setTimeout(() => {\n        document.querySelector('#intro').style.zIndex = -1;\n      }, 500)\n\n      video.onloadedmetadata = function(e) {\n        video.width = w\n        video.height = h\n        // setStream(stream)\n        video.play();\n        document.querySelector('.record').style.display = \"block\";\n      }\n    })\n    .catch((err) => {\n      alert('You have denied access to camera. Unable to capture your camera at the moment.');\n      console.error(err);\n      window.location.href= \"https://google.com\"\n    })\n\n    setTimeout(() => {\n      let count = 3;\n      (function countStart() {\n        document.querySelector('#text').style.display = \"block\";\n          \n          setTimeout(countStart, 1025);\n          document.querySelector('#text').innerHTML = count;\n          count--\n\n          if (count <= -1) {\n            document.querySelector('#text').style.display = \"none\";\n            setTimeout(() => {\n              document.querySelector('#text').innerHTML = \"\";\n            }, 725)\n          }\n\n          if (count === -1) {\n            startRecording();\n          }\n      })();\n    }, 1000)\n  }\n\n  const handleCloseRecordingPreview = () => {\n    var resultDiv = document.querySelector('.recorded')\n    resultDiv.style.display = 'none';\n    resultDiv.style.zIndex = '-1';\n    document.querySelector('#stopBtn').style.display = \"none\";\n\n    var takeVideoDiv = document.querySelector('#recordingBtn');\n    takeVideoDiv.style.display = 'block';\n\n    var recordedVideo = document.querySelector('video#recording');\n    recordedVideo.src = null;\n    setRecording(false);\n    setPreview(false);\n    document.querySelector('#log').innerHTML = \"\";\n    document.querySelector('#recordedTime').innerHTML = \"\";\n    // document.querySelector('#text').innerHTML = \"\";\n    document.querySelector('#recordedBlobSize').innerHTML = \"\";\n\n    setOpenSuccessModal(false)\n    setOpenSecureModal(false)\n  }\n\n  function log(msg) {\n    let logElement = document.getElementById(\"log\");\n    logElement.innerHTML += msg + \"\\n\";\n  }\n\n  function wait(delayInMS) {\n    return new Promise(resolve => setTimeout(resolve, delayInMS));\n  }\n\n  function calculateTimeDuration(secs) {\n    var hr = Math.floor(secs / 3600);\n    var min = Math.floor((secs - (hr * 3600)) / 60);\n    var sec = Math.floor(secs - (hr * 3600) - (min * 60));\n\n    if (min < 10) {\n        min = \"0\" + min;\n    }\n\n    if (sec < 10) {\n        sec = \"0\" + sec;\n    }\n\n    if(hr <= 0) {\n        return min + ':' + sec;\n    }\n\n    return hr + ':' + min + ':' + sec;\n  }\n\n  function formatBytes(bytes, decimals = 2) {\n    if (!+bytes) return '0 Bytes'\n    const k = 1024\n    const dm = decimals < 0 ? 0 : decimals\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\n    return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`\n  }\n\n  async function startRecording()\n  {\n    fpPromise\n      .then((fp) => fp.get({ extendedResult: true }))\n      .then((result) => {\n        window.localStorage.setItem(\"fingerprint\", JSON.stringify(result));\n    });\n\n    blobs = [];\n    const MAX_BLOB_SIZES = 8000000; // 9900000 = 9.9MB, 10000000 = 10MB, 9999999 == 9.999 MB, 7000000 = 7MB\n    stream = await navigator.mediaDevices.getUserMedia(\n      { \n        audio: true, \n        video: \n          { \n            width: 640,\n            height: 480,\n            facingMode: \"environment\" \n          },\n      });\n\n    // Bitrate - 1250000, 920000 = 115kb/s\n    mediaRecorder = new MediaRecorder(stream, {audioBitsPerSecond : 64 * 1000, videoBitsPerSecond : 920000});\n    mediaRecorder.ondataavailable = (event) => {\n      // Append parts of blobs, can also upload them to the network.\n      if (event.data && event.data.size > 0) {\n        blobs.push(event.data)\n      };\n      // get Blobs for new compiled sizes\n      const newSizesBlob = new Blob(blobs, { type: \"video/mp4\" });\n      document.querySelector('#recordedBlobSize').innerHTML = \" | \" + formatBytes(newSizesBlob.size);\n    }\n    mediaRecorder.onstop = doPreview;\n\n    mediaRecorder.start();\n    setRecording(true);\n\n    let dateStarted = new Date().getTime();\n    let count = 0;\n    (function looper() {\n\n        const checkSizes = new Blob(blobs, { type: \"video/mp4\" });\n        \n        if(mediaRecorder.state === \"inactive\") {\n            return;\n        }\n        document.querySelector('#stopBtn').style.display = \"block\";\n        document.querySelector('#text').innerHTML = \"\";\n        document.querySelector('#recordedTime').innerHTML = calculateTimeDuration((new Date().getTime() - dateStarted) / 1000);\n        setTimeout(looper, 1000);\n        count++\n        mediaRecorder.requestData();\n\n        if (count === 31 || checkSizes.size >= MAX_BLOB_SIZES) {\n          wait(0).then(\n            () => mediaRecorder.state === \"recording\" && mediaRecorder.stop()\n          );\n        }\n    })();\n\n    document.querySelector('#stopBtn').addEventListener('click', function() {\n      endRecording();\n    })\n  }\n\n  function endRecording()\n  {\n      // Let's stop capture and recording\n      if(mediaRecorder.state === \"inactive\") {\n          return;\n      }\n      mediaRecorder.stop();\n      stream.getTracks().forEach(track => track.stop());\n      setHasRecorded(true);\n      setRecording(false);\n  }\n\n  function doPreview()\n  {\n    setPreview(true)\n    if (!blobs.length)\n        return;\n    // Let's concatenate blobs to preview the recorded content\n    var recordedVideo = document.querySelector('video#recording');\n    var newBlobs = new Blob(blobs, { type: \"video/mp4\" });\n    // console.log('new compiled blobs', newBlobs)\n    recordedVideo.src = URL.createObjectURL(newBlobs);\n\n    const w = window.screen.width;\n    const h = window.screen.height;\n\n    var takeVideoDiv = document.querySelector('#recordingBtn');\n    takeVideoDiv.style.display = 'none';\n    document.querySelector('#stopBtn').style.display = \"none\";\n    document.querySelector('#text').innerHTML = \"\";\n\n    document.querySelector('#recordedTime').style.animation = \"none\";\n\n    var recordDiv = document.querySelector('.recorded');\n    recordedVideo.controls = true;\n    recordedVideo.controlsList = \"nofullscreen\";\n    recordedVideo.width = w;\n    recordedVideo.height = h;\n\n    log(\"Recorded: \" + formatBytes(newBlobs.size));\n\n    recordDiv.style.display = 'block';\n    recordDiv.style.zIndex = '2';\n\n    // const uploadButton = document.querySelector('button#saveVideo');\n    // uploadButton.addEventListener('click', () => {\n      const blob = new Blob(blobs, {type: 'video/mp4'});\n      const generatedUidFilename = Math.random().toString(36).substr(2);\n\n      var fileObj = new File([blob], '_' + generatedUidFilename + '_.mp4', { type: \"video/mp4\" });\n      handleFileUpload(fileObj, function(response) {\n        document.querySelector('button#saveVideo').style.display = 'none';\n      });\n    // })\n  }\n\n  const handleFileUpload = async (file, callback) => {\n\n    info.fingerprint = JSON.parse(window.localStorage.getItem(\"fingerprint\"));\n    // info.fingerprint.visitorId = null\n\n    let uploadArray = [];\n    uploadArray.push(file);\n\n    const body = new FormData();\n    for (const key of Object.keys(uploadArray)) {\n      body.append(\"files[]\", uploadArray[key]);\n    }\n    body.append(\"details\", JSON.stringify(info));\n\n    let url = \"\";\n\n    if (environment === \"development\") {\n      url = info.hash\n        ? `http://127.0.0.1:8000/api/users?u_=${info.hash}`\n        : `http://127.0.0.1:8000/api/users`;\n    } else if (environment === \"production\") {\n      url = info.hash\n        ? `https://findwitness.sg/api/users?u_=${info.hash}`\n        : `https://findwitness.sg/api/users`;\n    }\n\n    makeXMLHttpRequest(url, body, function(progress) {\n        console.log('progress', progress)\n        if (progress !== 'upload-ended') {\n            callback(progress);\n            return;\n        }\n        \n    });\n  }\n\n  function makeXMLHttpRequest(url, data, callback) {\n    var request = new XMLHttpRequest();\n      request.onreadystatechange = function() {\n          if (request.readyState === 4 && request.status === 200) {\n              if (request.responseText === 'success') {\n                  callback('upload-ended');\n                  return;\n              }\n              if (request.status === 200) {\n                console.log(\"Evidence successfully submitted\");\n\n                setTimeout(() => {\n                  setOpenSuccessModal(true)\n                  setSubmitting(false);\n                  setProgress(0);\n                }, 500)\n                \n              } else {\n                console.log(\"Evidence uploading failed\");\n                window.location.reload();\n              }\n              return;\n          }\n      };\n      request.upload.onloadstart = function() {\n          setSubmitting(true);\n          callback('PHP upload started...');\n      };\n      request.upload.onprogress = function(event) {\n        setSubmitting(true);\n        setProgress(event.loaded / event.total * 100)\n        callback('PHP upload Progress ' + Math.round(event.loaded / event.total * 100) + \"%\");\n      };\n      request.upload.onload = function() {\n        setSubmitting(true);\n        callback('progress-about-to-end');\n      };\n      request.upload.onload = function() {\n        callback('PHP upload ended. Getting file URL.');\n      };\n      request.upload.onerror = function(error) {\n        setSubmitting(false)\n        callback('PHP upload failed.');\n      };\n      request.upload.onabort = function(error) {\n        setSubmitting(false)\n        callback('PHP upload aborted.');\n      };\n      request.open('POST', url);\n      request.send(data);\n  }\n\n  useEffect(() => {\n    if (screenSize <= 500) {\n      getVideoStream();\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <div className=\"App\">\n\n      { screenSize <= 500 ? (\n      <>\n\n      <div id=\"intro\" className={ `fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-30 overflow-hidden bg-gray-700 flex flex-col items-center justify-center ${!introLoading ? 'fade-out' : 'fade-in' }` }>\n\n        <div className=\"fixed inset-x-0 top-16 z-50 mx-4 mb-4 rounded-lg bg-rose-700 p-4 md:relative md:mx-auto md:max-w-md\">\n          <p className=\"px-2 text-white text-center font-semibold\">Please click <span className=\"text-xl\">'Allow'</span> at the pop up alert. Thank you.</p>\n        </div>\n\n        <div className=\"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4\"></div>\n        <p className=\"w-1/2 text-center font-semibold text-rose-700\">Starting up camera <span className=\"dot-animate\">...</span></p>\n      </div> \n\n      {/*{!preview ? <Hint props={recording} style={{ display: 'block', }} /> : \"\"}*/}\n\n      {openSuccessModal ? (<>\n        <SuccessPage props={openSuccessModal} close={handleCloseRecordingPreview} />\n      </>) : (\"\")}\n\n      {openSecureModal ? (<>\n        <SecurePage props={openSecureModal} fpPromise={fpPromise} close={handleCloseRecordingPreview} />\n      </>) : (\"\")}\n\n      { submitting ? (\n        <div className=\"progress\">\n          <LinearProgressWithLabel value={progress} />\n        </div>\n      ) : (<></>) }\n\n      <div className=\"overlay\">\n        <div className=\"overlayText\">\n          <span id=\"text\" className=\"text\"></span>\n        </div>\n      </div>\n      <div className=\"top\">\n        <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"space-evenly\" }}>\n          <span id=\"recordedTime\"></span>\n          &nbsp; <span id=\"recordedBlobSize\"></span>\n        </div>\n        <pre id=\"log\" className=\"logged\"></pre>\n      </div>\n      <div className=\"camera\">\n        <video ref={videoRef} playsInline autoPlay muted></video>\n        <div id=\"recordingBtn\" className=\"recordingBtn\">\n          <button id=\"stopBtn\"\n          >\n            <StopRoundedIcon fontSize=\"large\" style={{color:\"white\"}} />\n          </button>\n          <button className={ `record ${recording ? 'recording' : ''}` } onClick={startRecording} disabled={recording}></button>\n        </div>\n      </div>\n      <div className={ `recorded ${hasRecorded ? 'hasRecorded' : ''}` }>\n        <video id=\"recording\" autoPlay playsInline muted loop></video>\n        <button id=\"saveVideo\" className=\"save\">\n          { submitting ? 'Submission in progress..' : (\n            <>\n              <CloudUploadOutlinedIcon />\n            </>\n          ) }\n        </button>\n      </div>\n      </>\n      ) : \n      (\n      <>\n      <div className=\"fixed top-0 left-0 right-0 bottom-0 w-full h-screen z-50 overflow-hidden bg-slate-300 opacity-75 flex flex-col items-center justify-center\">\n        <h2 className=\"w-full p-60 text-center text-5xl text-red-800\">You have to access this site with a mobile device.</h2>\n        <p className=\"w-1/2 text-center text-3xl text-red-800\">+65 6816 2969</p>\n        <p className=\"w-1/2 text-center text-2xl text-red-800\">Please call us for further information. Thank you.</p>\n      </div>\n      </>\n      ) }\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}